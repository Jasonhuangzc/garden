# ğŸš€ æ¸¸æˆåç«¯éƒ¨ç½²å®ŒæˆæŒ‡å—

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. æ ¸å¿ƒæ–‡ä»¶
- âœ… `game-logic.js` - æ¸¸æˆæ ¸å¿ƒé€»è¾‘ï¼ˆç”¨æˆ·ã€ç§¯åˆ†ã€é‡‘å¸ã€èŠ±å›­ï¼‰
- âœ… `script.js` - å‰ç«¯ä¸»è„šæœ¬ï¼ˆUIæ›´æ–°ã€äº‹ä»¶å¤„ç†ï¼‰
- âœ… `firebase-config.js` - Firebaseé…ç½®ï¼ˆå·²æœ‰ï¼‰
- âœ… `admin.html` - æ•°æ®åº“ç®¡ç†é¢æ¿
- âœ… `firestore.rules` - æ›´æ–°çš„å®‰å…¨è§„åˆ™

### 2. æ•°æ®åº“ç»“æ„
- âœ… `users` collection - ç”¨æˆ·æ•°æ®ï¼ˆuser1, user2ï¼‰
- âœ… `sharedAccount` collection - å…±äº«é‡‘å¸è´¦æˆ·
- âœ… `garden` collection - èŠ±å›­çŠ¶æ€
- âœ… `flowers` collection - èŠ±æœµå•†å“ï¼ˆå¯é€‰ï¼‰

### 3. æ¸¸æˆåŠŸèƒ½
- âœ… è‡ªåŠ¨åŒæ­¥ä¸èƒŒå•è¯æ•°æ®
- âœ… ç§¯åˆ†ç³»ç»Ÿï¼ˆ1ä¸ªå•è¯=1ç§¯åˆ†ï¼‰
- âœ… æ”¶å–ç§¯åˆ†è½¬é‡‘å¸
- âœ… è´­ä¹°èŠ±æœµï¼ˆ5é‡‘å¸/æœµï¼‰
- âœ… è‡ªåŠ¨ç§æ¤åˆ°èŠ±å›­
- âœ… å®æ—¶æ•°æ®åŒæ­¥

---

## ğŸ“ éƒ¨ç½²æ­¥éª¤

### Step 1: éƒ¨ç½²åˆ°Firebase

```bash
# 1. ç¡®ä¿å·²ç™»å½•Firebase
firebase login

# 2. éƒ¨ç½²Firestoreè§„åˆ™
firebase deploy --only firestore:rules

# 3. éƒ¨ç½²ç½‘ç«™
firebase deploy --only hosting
```

### Step 2: åˆå§‹åŒ–æ•°æ®åº“

è®¿é—®ç®¡ç†é¢æ¿åˆå§‹åŒ–æ•°æ®åº“ï¼š
```
https://garden-c4155.web.app/admin.html
```

ç‚¹å‡» **"ğŸš€ åˆå§‹åŒ–æ•°æ®åº“"** æŒ‰é’®

### Step 3: åŒæ­¥å•è¯æ•°æ®

**æ–¹å¼Aï¼šä½¿ç”¨ç®¡ç†é¢æ¿**
åœ¨ `admin.html` ç‚¹å‡» **"ğŸ”„ åŒæ­¥å•è¯æ•°æ®"**

**æ–¹å¼Bï¼šè‡ªåŠ¨åŒæ­¥ï¼ˆæ¨èï¼‰**
ç¡®ä¿ `current_team_data.json` æ–‡ä»¶å­˜åœ¨å¹¶å®šæœŸæ›´æ–°ï¼š

```bash
# Windows - è®¾ç½®å®šæ—¶ä»»åŠ¡æ¯åˆ†é’Ÿè¿è¡Œ
python fetch_current_data.py
```

### Step 4: æµ‹è¯•æ¸¸æˆåŠŸèƒ½

è®¿é—®ä¸»é¡µï¼š
```
https://garden-c4155.web.app/index.html
```

æµ‹è¯•ä»¥ä¸‹åŠŸèƒ½ï¼š
1. âœ… æŸ¥çœ‹ç”¨æˆ·èƒŒå•è¯æ•°æ®
2. âœ… ç‚¹å‡»"æ”¶å–ç§¯åˆ†"æŒ‰é’®
3. âœ… è´­ä¹°èŠ±æœµ
4. âœ… æŸ¥çœ‹èŠ±å›­æ›´æ–°

---

## ğŸ® æ¸¸æˆæµç¨‹è¯´æ˜

### æµç¨‹1ï¼šèµšå–ç§¯åˆ†
```
ç”¨æˆ·èƒŒå•è¯ â†’ Pythonè„šæœ¬åŒæ­¥æ•°æ® â†’ æ›´æ–°current_team_data.json 
â†’ Firebaseå®æ—¶æ›´æ–° â†’ å‰ç«¯æ˜¾ç¤ºç§¯åˆ†
```

### æµç¨‹2ï¼šæ”¶å–ç§¯åˆ†
```
ç‚¹å‡»"æ”¶å–ç§¯åˆ†"æŒ‰é’® â†’ claimPoints(userId) 
â†’ ç§¯åˆ†è½¬ä¸ºé‡‘å¸ â†’ ç”¨æˆ·ç§¯åˆ†æ¸…é›¶ â†’ é‡‘å¸è´¦æˆ·å¢åŠ 
```

### æµç¨‹3ï¼šè´­ä¹°ç§æ¤
```
ç‚¹å‡»"Redeem"æŒ‰é’® â†’ buyFlower(flowerId) 
â†’ æ£€æŸ¥é‡‘å¸ â†’ æ£€æŸ¥æ ¼å­ â†’ æ‰£é™¤é‡‘å¸ â†’ è‡ªåŠ¨ç§æ¤
```

---

## ğŸ”§ æœ¬åœ°æµ‹è¯•

### ä½¿ç”¨æœ¬åœ°æœåŠ¡å™¨
```bash
# å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨
python serve.py

# è®¿é—®
http://localhost:8000/index.html
http://localhost:8000/admin.html
```

### è°ƒè¯•å·¥å…·
æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼Œä½¿ç”¨ï¼š
```javascript
// æŸ¥çœ‹æ¸¸æˆçŠ¶æ€
window.gameDebug.getState()

// æ‰‹åŠ¨åŒæ­¥æ•°æ®
window.gameDebug.syncData()

// é‡æ–°åŠ è½½æ•°æ®
window.gameDebug.reload()

// æ”¶å–ç§¯åˆ†
window.gameDebug.claimPoints('user1')

// è´­ä¹°èŠ±æœµ
window.gameDebug.buyFlower('rose')
```

---

## ğŸ“Š æ•°æ®åº“ç¤ºä¾‹

### users/user1
```json
{
  "name": "ida#",
  "avatar": "image/avatar_ida.jpg",
  "gender": "female",
  "currentPoints": 40,
  "totalWordsToday": 40,
  "studyTimeToday": 17,
  "checkInDays": 17,
  "lastUpdated": "2026-01-28T15:00:00Z"
}
```

### sharedAccount/coins
```json
{
  "totalCoins": 100,
  "lastUpdated": "2026-01-28T15:00:00Z",
  "history": [
    {
      "type": "earn",
      "amount": 40,
      "userId": "user1",
      "userName": "ida#",
      "timestamp": "2026-01-28T15:00:00Z",
      "description": "æ”¶å–40ç§¯åˆ†"
    }
  ]
}
```

### garden/plots
```json
{
  "maxPlots": 9,
  "occupiedPlots": 2,
  "grid": [
    {
      "id": 0,
      "flower": "rose",
      "flowerName": "ç«ç‘°èŠ±è‹",
      "flowerImage": "image/image (4).png",
      "plantedAt": "2026-01-28T15:00:00Z",
      "plantedBy": "user1"
    },
    {
      "id": 1,
      "flower": null,
      "flowerName": null,
      "plantedAt": null,
      "plantedBy": null
    }
    // ... å…±9ä¸ªæ ¼å­
  ],
  "lastUpdated": "2026-01-28T15:00:00Z"
}
```

---

## ğŸ å¸¸è§é—®é¢˜

### é—®é¢˜1ï¼šæ•°æ®ä¸åŒæ­¥
**è§£å†³æ–¹æ¡ˆï¼š**
1. æ£€æŸ¥ `current_team_data.json` æ˜¯å¦å­˜åœ¨
2. è¿è¡Œ `python fetch_current_data.py`
3. åœ¨admin.htmlç‚¹å‡»"åŒæ­¥æ•°æ®"
4. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯

### é—®é¢˜2ï¼šæ”¶å–ç§¯åˆ†æ— æ•ˆ
**è§£å†³æ–¹æ¡ˆï¼š**
1. ç¡®ä¿ç§¯åˆ† â‰¥ 10
2. æ£€æŸ¥æŒ‰é’®æ˜¯å¦disabled
3. æŸ¥çœ‹æ§åˆ¶å°é”™è¯¯
4. åˆ·æ–°é¡µé¢é‡è¯•

### é—®é¢˜3ï¼šè´­ä¹°èŠ±æœµå¤±è´¥
**è§£å†³æ–¹æ¡ˆï¼š**
1. æ£€æŸ¥é‡‘å¸æ˜¯å¦ â‰¥ 5
2. æ£€æŸ¥èŠ±å›­æ˜¯å¦å·²æ»¡ï¼ˆ9/9ï¼‰
3. æŸ¥çœ‹Toastæç¤ºä¿¡æ¯

### é—®é¢˜4ï¼šæ¨¡å—åŠ è½½é”™è¯¯
**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# ç¡®ä¿ä½¿ç”¨HTTPæœåŠ¡å™¨ï¼Œä¸èƒ½ç”¨file://åè®®
python serve.py
# æˆ–
firebase serve
```

---

## ğŸ” å®‰å…¨æ³¨æ„äº‹é¡¹

### å½“å‰è®¾ç½®ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
- âœ… æ‰€æœ‰è¯»å–å¼€æ”¾
- âœ… æ‰€æœ‰å†™å…¥å¼€æ”¾ï¼ˆæ–¹ä¾¿æµ‹è¯•ï¼‰

### ç”Ÿäº§ç¯å¢ƒå»ºè®®
æ›´æ–° `firestore.rules`:
```javascript
// æ·»åŠ è®¤è¯è¦æ±‚
match /users/{userId} {
  allow read: if true;
  allow write: if request.auth != null;
}
```

---

## ğŸ“ˆ ä¸‹ä¸€æ­¥ä¼˜åŒ–

### åŠŸèƒ½æ‰©å±•
- [ ] æ·»åŠ æ¯æ—¥é‡ç½®æœºåˆ¶
- [ ] å†å²è®°å½•æŸ¥çœ‹
- [ ] æˆå°±ç³»ç»Ÿ
- [ ] æ›´å¤šèŠ±æœµç§ç±»

### æŠ€æœ¯ä¼˜åŒ–
- [ ] æ·»åŠ Firebase Authentication
- [ ] å®ç°äº‹åŠ¡å¤„ç†ï¼ˆé˜²æ­¢å¹¶å‘é—®é¢˜ï¼‰
- [ ] æ·»åŠ æ•°æ®éªŒè¯
- [ ] é”™è¯¯æ—¥å¿—æ”¶é›†

---

## ğŸ“ å¿«é€Ÿå‘½ä»¤

```bash
# éƒ¨ç½²
firebase deploy

# æœ¬åœ°æµ‹è¯•
python serve.py

# åŒæ­¥æ•°æ®
python fetch_current_data.py

# æŸ¥çœ‹æ—¥å¿—
firebase functions:log
```

---

## âœ¨ å®Œæˆæ£€æŸ¥æ¸…å•

éƒ¨ç½²å‰ç¡®è®¤ï¼š
- [ ] Firebaseé¡¹ç›®å·²åˆ›å»º
- [ ] Firestoreè§„åˆ™å·²éƒ¨ç½²
- [ ] æ‰€æœ‰JSæ–‡ä»¶å·²ä¸Šä¼ 
- [ ] current_team_data.jsonå­˜åœ¨
- [ ] æœ¬åœ°æµ‹è¯•é€šè¿‡

é¦–æ¬¡è¿è¡Œï¼š
- [ ] è®¿é—®admin.htmlåˆå§‹åŒ–æ•°æ®åº“
- [ ] åŒæ­¥å•è¯æ•°æ®
- [ ] æµ‹è¯•æ”¶å–ç§¯åˆ†
- [ ] æµ‹è¯•è´­ä¹°èŠ±æœµ
- [ ] éªŒè¯å®æ—¶åŒæ­¥

---

**ğŸ‰ æ­å–œï¼åç«¯ç³»ç»Ÿå·²å°±ç»ªï¼**

ç°åœ¨å¯ä»¥äº«å—å•è¯èŠ±å›­æ¸¸æˆäº†ï¼ğŸŒ»
